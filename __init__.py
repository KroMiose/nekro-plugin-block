"""
# 用户屏蔽管理插件 (User Block Manager)

AI自主管理用户屏蔽的插件，支持两种屏蔽模式。

## 主要功能

### 两种屏蔽模式

1. **禁止触发模式 (Prevent Trigger)**
   - 被屏蔽用户的消息AI仍然可见
   - 该用户无法直接唤醒AI
   - 当AI被其他触发条件唤醒时，仍能看到该用户的消息
   - 适用场景：用户频繁@AI或刷屏，但AI仍想保留观察权

2. **完全屏蔽模式 (Full Block)**
   - AI完全看不到被屏蔽用户的消息
   - 就像该用户不存在一样
   - 适用场景：用户严重违规、恶意骚扰，或AI完全不想看到其消息

### 核心功能

- **精确的屏蔽时长**: 支持秒级自定义屏蔽时长，AI可自行计算时长
- **永久屏蔽**: 可配置是否允许AI设置永久屏蔽
- **自动到期**: 屏蔽时间到期后自动解除
- **状态展示**: 在AI的系统提示词中显示当前屏蔽的用户列表
- **灵活查询**: AI可以查看已屏蔽用户的详细信息和剩余时间

## AI可用方法

1. `屏蔽用户_禁止触发模式(user_identifier, reason, duration_seconds)` - 设置用户为禁止触发模式
2. `屏蔽用户_完全屏蔽模式(user_identifier, reason, duration_seconds)` - 完全屏蔽用户
3. `解除用户屏蔽(user_identifier)` - 解除用户的屏蔽状态
4. `查看已屏蔽用户列表()` - 查看当前聊天中已屏蔽的用户

**参数说明:**
- `user_identifier`: 用户的平台ID（如QQ号"12345678"）或唯一标识（如"onebot_v11:12345678"）
- `reason`: 屏蔽原因
- `duration_seconds`: 屏蔽时长（秒），不传则使用默认值，传None或负数表示永久

## 配置说明

- **启用禁止触发功能**: 是否允许AI使用禁止触发模式
- **启用完全屏蔽功能**: 是否允许AI使用完全屏蔽模式
- **最大屏蔽时长（秒）**: 单次屏蔽的最大秒数限制（默认259200秒=72小时）
- **默认屏蔽时长（秒）**: AI未指定时长时使用的默认值（默认86400秒=24小时）
- **允许永久屏蔽**: 是否允许AI设置永久屏蔽
- **提示词中显示**: 是否在AI提示词中显示屏蔽用户

**注意**: 系统会在屏蔽时间到期后自动解除，无需额外配置。

## 代码使用示例

AI会通过代码调用这些方法：

```python
# 屏蔽用户1小时（3600秒）
block_user_prevent_trigger("12345678", "频繁刷屏", 3600)

# 屏蔽用户24小时（86400秒）
block_user_full("12345678", "发送违规内容", 86400)

# 查看已屏蔽的用户
list_blocked_users()

# 解除屏蔽
unblock_user("12345678")
```

## 注意事项

- AI自主决定屏蔽操作，是针对特定聊天环境的自我保护机制
- 屏蔽操作会直接作用到系统的用户控制层面
- 建议配置合理的最大屏蔽时长，避免AI过度使用
- 永久屏蔽功能建议谨慎开启
- AI会在生成代码时自行计算时长（秒数），便于精确控制
"""

from .methods import (
    block_user_full,
    block_user_prevent_trigger,
    cleanup,
    inject_blocked_users_prompt,
    list_blocked_users,
    unblock_user,
)
from .plugin import plugin

__all__ = ["plugin"]
